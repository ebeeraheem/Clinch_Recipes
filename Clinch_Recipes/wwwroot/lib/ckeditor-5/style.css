/* CKEditor Dark Theme Integration */
.ck-editor {
    background: var(--bg-primary) !important;
    border: 2px solid var(--border-primary) !important;
    border-radius: 6px !important;
    transition: border-color 0.3s ease !important;
}

.ck-editor.ck-focused {
    border-color: var(--accent-primary) !important;
    box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.1) !important;
}

.ck-editor__main {
    background: var(--bg-primary) !important;
}

.ck-content {
    background: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    min-height: 350px !important;
    padding: 1.25rem !important;
    font-size: 1rem !important;
    line-height: 1.6 !important;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
}

/* Toolbar Styling */
.ck-toolbar {
    background: var(--bg-secondary) !important;
    border-bottom: 1px solid var(--border-primary) !important;
    border-radius: 6px 6px 0 0 !important;
    padding: 0.75rem !important;
}

.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-sticky-panel__content_sticky {
    background: var(--bg-secondary) !important;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2) !important;
    top: 76px !important;
}

.ck-button {
    color: var(--text-primary) !important;
    background: var(--bg-primary) !important;
    border-radius: 4px !important;
}

    .ck-button:not(.ck-disabled):hover {
        background: var(--accent-primary) !important;
        color: white !important;
    }

    .ck-button.ck-on {
        background: var(--accent-secondary) !important;
        color: white !important;
    }

    .ck-button.ck-disabled {
        opacity: 0.4 !important;
    }

/* Dropdown Styling */
.ck-dropdown__panel {
    background: var(--bg-tertiary) !important;
    border: 1px solid var(--border-primary) !important;
    border-radius: 6px !important;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4) !important;
}

.ck-list {
    background: transparent !important;
}

.ck-list__item {
    color: var(--text-primary) !important;
    border-radius: 4px !important;
    margin: 0.25rem !important;
}

    .ck-list__item:hover {
        background: var(--accent-primary) !important;
        color: white !important;
    }

    .ck-list__item.ck-on {
        background: var(--accent-secondary) !important;
        color: white !important;
    }

/* Code Block Styling - This is the key part for syntax highlighting */
.ck-content pre {
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border-primary) !important;
    border-radius: 6px !important;
    padding: 1.25rem !important;
    color: var(--text-primary) !important;
    font-family: 'Courier New', 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace !important;
    font-size: 0.9rem !important;
    line-height: 1.5 !important;
    overflow-x: auto !important;
    position: relative !important;
    margin: 1rem 0 !important;
}

    .ck-content pre::before {
        content: attr(data-language) !important;
        position: absolute !important;
        top: 0.5rem !important;
        right: 0.75rem !important;
        font-size: 0.75rem !important;
        color: var(--text-secondary) !important;
        background: var(--bg-primary) !important;
        padding: 0.25rem 0.5rem !important;
        border-radius: 3px !important;
        border: 1px solid var(--border-primary) !important;
        font-family: 'Segoe UI', sans-serif !important;
        text-transform: uppercase !important;
        font-weight: 600 !important;
    }

    .ck-content pre code {
        background: transparent !important;
        color: inherit !important;
        padding: 0 !important;
        border: none !important;
        border-radius: 0 !important;
        font-family: inherit !important;
        font-size: inherit !important;
    }

    /* Language-specific code block styling */
    .ck-content pre[data-language="javascript"] {
        border-left: 4px solid #f7df1e !important;
    }

    .ck-content pre[data-language="typescript"] {
        border-left: 4px solid #3178c6 !important;
    }

    .ck-content pre[data-language="python"] {
        border-left: 4px solid #3776ab !important;
    }

    .ck-content pre[data-language="csharp"] {
        border-left: 4px solid #239120 !important;
    }

    .ck-content pre[data-language="css"] {
        border-left: 4px solid #1572b6 !important;
    }

    .ck-content pre[data-language="html"] {
        border-left: 4px solid #e34f26 !important;
    }

    .ck-content pre[data-language="sql"] {
        border-left: 4px solid #00758f !important;
    }

    .ck-content pre[data-language="json"] {
        border-left: 4px solid #000000 !important;
    }

    .ck-content pre[data-language="bash"] {
        border-left: 4px solid #4eaa25 !important;
    }

    .ck-content pre[data-language="powershell"] {
        border-left: 4px solid #012456 !important;
    }

/* Inline Code Styling */
.ck-content code {
    background: var(--bg-secondary) !important;
    color: var(--accent-primary) !important;
    padding: 0.25rem 0.5rem !important;
    border-radius: 4px !important;
    font-family: 'Courier New', 'SF Mono', 'Monaco', monospace !important;
    font-size: 0.9em !important;
    border: 1px solid var(--border-primary) !important;
}

/* Blockquote Styling */
.ck-content blockquote {
    border-left: 4px solid var(--accent-primary) !important;
    background: var(--bg-secondary) !important;
    padding: 1rem 1.5rem !important;
    margin: 1.5rem 0 !important;
    font-style: italic !important;
    color: var(--text-secondary) !important;
    border-radius: 0 6px 6px 0 !important;
}

/* Table Styling */
.ck-content .table {
    margin: 1rem 0 !important;
}

    .ck-content .table table {
        border-collapse: collapse !important;
        border: 1px solid var(--border-primary) !important;
        background: var(--bg-secondary) !important;
        border-radius: 6px !important;
        overflow: hidden !important;
        width: 100% !important;
    }

        .ck-content .table table td,
        .ck-content .table table th {
            border: 1px solid var(--border-primary) !important;
            padding: 0.75rem !important;
            color: var(--text-primary) !important;
        }

        .ck-content .table table th {
            background: var(--bg-tertiary) !important;
            font-weight: 600 !important;
            text-align: left !important;
        }

        .ck-content .table table tr:nth-child(even) {
            background: var(--bg-primary) !important;
        }

/* Link Styling */
.ck-content a {
    color: var(--accent-primary) !important;
    text-decoration: underline !important;
    transition: color 0.2s ease !important;
}

    .ck-content a:hover {
        color: var(--accent-secondary) !important;
    }

/* List Styling */
.ck-content ul,
.ck-content ol {
    color: var(--text-primary) !important;
    padding-left: 2rem !important;
}

.ck-content li {
    margin-bottom: 0.5rem !important;
    line-height: 1.6 !important;
}

.ck-content ul li::marker {
    color: var(--accent-primary) !important;
}

.ck-content ol li::marker {
    color: var(--accent-primary) !important;
    font-weight: 600 !important;
}

/* Heading Styling */
.ck-content h2 {
    color: var(--text-primary) !important;
    font-size: 1.75rem !important;
    font-weight: 700 !important;
    margin: 2rem 0 1rem 0 !important;
    border-bottom: 2px solid var(--accent-primary) !important;
    padding-bottom: 0.5rem !important;
}

.ck-content h3 {
    color: var(--text-primary) !important;
    font-size: 1.5rem !important;
    font-weight: 600 !important;
    margin: 1.5rem 0 0.75rem 0 !important;
    color: var(--accent-primary) !important;
}

/* Placeholder Styling */
.ck-content .ck-placeholder {
    color: var(--text-secondary) !important;
    font-style: italic !important;
}

/* Selection Styling */
.ck-content ::selection {
    background: rgba(88, 166, 255, 0.3) !important;
}

/* Focus Outline */
.ck-content:focus {
    outline: none !important;
}

/* Source Editing Mode */
.ck-source-editing-area {
    background: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    border: none !important;
    font-family: 'Courier New', 'SF Mono', 'Monaco', monospace !important;
    font-size: 0.9rem !important;
    line-height: 1.5 !important;
    padding: 1rem !important;
}

    .ck-source-editing-area:focus {
        outline: none !important;
        box-shadow: none !important;
    }

/* Toolbar Separators */
.ck-toolbar__separator {
    background: var(--border-primary) !important;
}

/* Mobile Responsiveness */
@@media (max-width: 768px) {
    .ck-toolbar {
        flex-wrap: wrap !important;
        padding: 0.5rem !important;
    }

        .ck-toolbar .ck-toolbar__items {
            flex-wrap: wrap !important;
            gap: 0.25rem !important;
        }

    .ck-content {
        min-height: 300px !important;
        padding: 1rem !important;
        font-size: 0.95rem !important;
    }

        .ck-content pre {
            padding: 1rem !important;
            font-size: 0.85rem !important;
            overflow-x: auto !important;
        }

            .ck-content pre::before {
                font-size: 0.7rem !important;
                top: 0.25rem !important;
                right: 0.5rem !important;
            }
}

/* Loading State */
#editor-container:not(:has(.ck-editor)) {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-height: 400px !important;
    background: var(--bg-primary) !important;
    border: 2px solid var(--border-primary) !important;
    border-radius: 6px !important;
    color: var(--text-secondary) !important;
}

    #editor-container:not(:has(.ck-editor))::before {
        content: "Loading editor..." !important;
        font-style: italic !important;
    }
